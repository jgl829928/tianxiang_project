webpackJsonp([20],{m6oE:function(e,r){},nzsm:function(e,r){},oPJ8:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("Xxa5"),s=t.n(i),a=t("exGp"),n=t.n(a),o=t("VsUZ"),l=t("TIfe"),c={name:"VersionModify",data:function(){var e=this,r=function(r,t,i){if(""===t)i(new Error("请输入数值"));else{if(""!==e.reqData[r.field]){var s=r.field.replace("Min","Max");e.$refs.ruleForm.validateField(s)}i()}},t=function(r,t,i){var s=r.field.replace("Max","Min");""===t?i(new Error("请输入数值")):t<=e.reqData[s]?i(new Error("此项值应大于最小值")):i()};return{serverIDList:[1,2,3],isIndeterminate:!0,checkAll:!1,reqData:{ServerIDList:[],IOSMinVersion:"",IOSMaxVersion:"",AndroidMinVersion:"",AndroidMaxVersion:""},confirmDialog:!1,confirmServer:[],dia_isIndeterminate:!0,dia_checkAll:!1,dialogVisible:!1,setResults:{},rules:{ServerIDList:[{required:!0,message:"请选择服务器",trigger:"change"}],IOSMinVersion:[{required:!0,message:"请输入数值",trigger:"blur"},{pattern:/^([1-9]\d*|[0]{1,1})$/,message:"请输入正整数",trigger:"blur"},{validator:r,trigger:"blur"}],IOSMaxVersion:[{required:!0,message:"请输入数值",trigger:"blur"},{pattern:/^([1-9]\d*|[0]{1,1})$/,message:"请输入正整数",trigger:"blur"},{validator:t,trigger:"blur"}],AndroidMinVersion:[{required:!0,message:"请输入数值",trigger:"blur"},{pattern:/^([1-9]\d*|[0]{1,1})$/,message:"请输入正整数",trigger:"blur"},{validator:r,trigger:"blur"}],AndroidMaxVersion:[{required:!0,message:"请输入数值",trigger:"blur"},{pattern:/^([1-9]\d*|[0]{1,1})$/,message:"请输入正整数",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){this.getData()},methods:{getData:function(){var e=this;return n()(s.a.mark(function r(){var t;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get(o.b.vModify);case 2:(t=r.sent)&&1===t.Code&&(e.serverIDList=t.Data.serverIDList||[]);case 4:case"end":return r.stop()}},r,e)}))()},handleCheckAllChange:function(e){this.reqData.ServerIDList=e?this.serverIDList:[],this.isIndeterminate=!1},dialogCheck:function(e){this.confirmServer=e?this.serverIDList:[],this.dia_isIndeterminate=!1},submitForm:function(e){var r,t=this;this.$refs[e].validate((r=n()(s.a.mark(function e(r){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:t.confirmDialog=!0;case 3:case"end":return e.stop()}},e,t)})),function(e){return r.apply(this,arguments)}))},confirm_submit:Object(l.a)(function(){var e=this;this.reqData.ServerIDList.toString()!==this.confirmServer.toString()?this.$message.error("与所选服务器不匹配,请检查!"):this.$http.post(o.b.vModifySubmit,this.reqData).then(function(r){r&&1===r.Code&&(e.$message({message:"添加成功",type:"success"}),e.setResults=r.Data,e.confirmDialog=!1,e.dialogVisible=!0)})},500),handleClose:function(){this.$router.push("/version")},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"common_page"},[t("div",{staticClass:"title"},[e._v("Modify A Version")]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"form_content"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.reqData,"status-icon":"",rules:e.rules,"label-width":"100px","hide-required-asterisk":""}},[t("el-form-item",{attrs:{label:"IOSVersion",prop:"IOSVersion"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"IOSMinVersion"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.reqData.IOSMinVersion,callback:function(r){e.$set(e.reqData,"IOSMinVersion",r)},expression:"reqData.IOSMinVersion"}})],1)],1),e._v(" "),t("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"IOSMaxVersion"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.reqData.IOSMaxVersion,callback:function(r){e.$set(e.reqData,"IOSMaxVersion",r)},expression:"reqData.IOSMaxVersion"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"AndroidVersion",prop:"position"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"AndroidMinVersion"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.reqData.AndroidMinVersion,callback:function(r){e.$set(e.reqData,"AndroidMinVersion",r)},expression:"reqData.AndroidMinVersion"}})],1)],1),e._v(" "),t("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"AndroidMaxVersion"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.reqData.AndroidMaxVersion,callback:function(r){e.$set(e.reqData,"AndroidMaxVersion",r)},expression:"reqData.AndroidMaxVersion"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"ServerIDList",prop:"ServerIDList"}},[t("div",{staticClass:"serverCheck"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(r){e.checkAll=r},expression:"checkAll"}},[e._v("全选")]),e._v(" "),t("el-checkbox-group",{model:{value:e.reqData.ServerIDList,callback:function(r){e.$set(e.reqData,"ServerIDList",r)},expression:"reqData.ServerIDList"}},e._l(e.serverIDList,function(r,i){return t("el-checkbox",{key:i,attrs:{label:r}},[e._v(e._s(r))])}),1)],1)],1)]),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),t("el-dialog",{staticClass:"confirm_dialog",attrs:{title:"确认",visible:e.confirmDialog},on:{"update:visible":function(r){e.confirmDialog=r}}},[t("div",[e._v("已选择的服务器:"+e._s(this.reqData.ServerIDList.join(",")))]),e._v(" "),t("div",[e._v("\n            请再次选择服务器\n            "),t("div",{staticClass:"serverCheck"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("el-checkbox",{attrs:{indeterminate:e.dia_isIndeterminate},on:{change:e.dialogCheck},model:{value:e.dia_checkAll,callback:function(r){e.dia_checkAll=r},expression:"dia_checkAll"}},[e._v("全选")]),e._v(" "),t("el-checkbox-group",{model:{value:e.confirmServer,callback:function(r){e.confirmServer=r},expression:"confirmServer"}},e._l(e.serverIDList,function(r,i){return t("el-checkbox",{key:i,attrs:{label:r}},[e._v(e._s(r))])}),1)],1)],1)]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm_submit}},[e._v("确 定")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.confirmDialog=!1}}},[e._v("取消")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(r){e.dialogVisible=r},closed:e.handleClose}},[e.setResults.failedIDList?t("div",[e._v("设置失败的服务器："+e._s(e.setResults.failedIDList.join(",")))]):e._e(),e._v(" "),e.setResults.successIDList?t("div",[e._v("设置成功的服务器："+e._s(e.setResults.successIDList.join(",")))]):e._e(),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=t("VU/8")(c,u,!1,function(e){t("nzsm"),t("m6oE")},"data-v-295d02cc",null);r.default=d.exports}});
//# sourceMappingURL=20.2494634fc01d13017f9a.js.map