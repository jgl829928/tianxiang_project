{"version":3,"sources":["webpack:///src/components/\bselectServer.vue","webpack:///./src/components/\bselectServer.vue?bfeb","webpack:///./src/components/\bselectServer.vue","webpack:///src/views/worldmap/index.vue","webpack:///./src/views/worldmap/index.vue?8ea7","webpack:///./src/views/worldmap/index.vue"],"names":["_selectServer","name","props","data","serverList","typeList","mounted","this","getData","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","$http","get","api","sent","Code","Data","serverlist","$emit","mapcitytypelist","stop","search","reqdata","selectId","components__selectServer","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","placeholder","model","value","callback","$$v","$set","expression","_l","item","index","key","label","type","plain","icon","disabled","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","worldmap","components","selectServer","imgStr","isDisable","serverId","allpoints","points","pointsNum","loading","computed","pointsList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","err","return","imgBase64","promise_default","resolve","Object","auth","then","inialLine","getType","id","$message","error","getpointData","i","_this2","mapRequest","_i","push","post","mapBolck","all","dealdata","mapPoints","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","block","JSON","parse","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","point","pointItem","RID","cType","CType","cName","getName","CName","level","Level","X","Y","stringify_default","renderMap","typechange","_this3","filter","length","typeinfo","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","img","Image","canvas","document","createElement","ctx","getContext","myChart","echarts_default","init","querySelector","width","getWidth","height","getHeight","fullImage","onload","drawImage","src","toDataURL","setTimeout","resize","geoMapName","Math","round","random","features","properties","geometry","coordinates","registerMap","setOption","tooltip","trigger","confine","show","formatter","params","geo","map","aspectScale","layoutCenter","layoutSize","silent","roam","scaleLimit","min","itemStyle","borderWidth","color","image","repeat","series","coordinateSystem","symbol","normal","opacity","symbolSize","large","views_worldmap","getserver","label-width","inline","label-position","span","xs","min-width","clearable","change","_s","directives","rawName","ssrContext"],"mappings":"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","file":"static/js/3.daf93e9cca2c5f9adb18.js","sourcesContent":["<template>\n  <div class=\"select_server\">\n    <span class=\"left_name\">id</span>\n    <el-select v-model=\"reqdata.selectId\" placeholder=\"请选择\">\n      <el-option v-for=\"(item,index) in serverList\" :label=\"item\" :value=\"item\" :key=\"index\"></el-option>\n    </el-select>\n    <el-button class=\"right_btn\" type=\"info\" plain icon=\"el-icon-search\" @click=\"search\" :disabled=\"disabled\"></el-button>\n  </div>\n</template>\n<script>\nimport api from \"@/utils/api\";\nexport default {\n  name: \"selectServer\",\n  props: [\"reqdata\",\"name\",\"disabled\"],\n  data() {\n    return {\n      serverList: [],\n      typeList:[],\n    };\n  },\n  mounted() {\n    this.getData();\n  },\n  methods: {\n    // 获取搜索下拉框数据\n    async getData() {\n      let res = await this.$http.get(api[this.name]);\n      if (res && res.Code === 1) {\n        this.serverList = res.Data.serverlist || [];\n        if(this.name==\"worldmap\"){\n          this.$emit(\"typeList\", res.Data.mapcitytypelist);\n        }\n      }\n    },\n    search() {\n      this.$emit(\"getserver\", this.reqdata.selectId);\n    }\n  }\n};\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/\bselectServer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"select_server\"},[_c('span',{staticClass:\"left_name\"},[_vm._v(\"id\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.reqdata.selectId),callback:function ($$v) {_vm.$set(_vm.reqdata, \"selectId\", $$v)},expression:\"reqdata.selectId\"}},_vm._l((_vm.serverList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item,\"value\":item}})}),1),_vm._v(\" \"),_c('el-button',{staticClass:\"right_btn\",attrs:{\"type\":\"info\",\"plain\":\"\",\"icon\":\"el-icon-search\",\"disabled\":_vm.disabled},on:{\"click\":_vm.search}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dfa481f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/\bselectServer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./\\bselectServer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./\\bselectServer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dfa481f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./\\bselectServer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/\bselectServer.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"common_content map_content\">\n    <select-server :reqdata=\"reqdata\" @getserver=\"search\" :name=\"name\" @typeList=\"getType\" :disabled=\"isDisable\"></select-server>\n    <div class=\"map\" id=\"map\">\n      <el-form class=\"c-type-form\" label-width=\"100px\" :inline=\"true\" label-position=\"right\">\n        <el-row>\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-form-item label=\"Type\" min-width=\"120\">\n              <el-select v-model=\"type\" clearable placeholder=\"Type\" @change=\"typechange\">\n                <el-option v-for=\"(item,index) in typeList\" :label=\"item.CName\" :value=\"item.CType\" :key=\"index\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\" :xs=\"24\">\n            <el-form-item label=\"Num\" min-width=\"120\">\n              <span>{{pointsNum}}</span>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div class=\"mapitem\" id=\"mapitem\" v-loading=\"loading\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import api from \"@/utils/api\";\n  import { URL } from \"@/utils/api\";\n  import { base64 ,_debounce} from \"@/utils/auth\";\n  import echarts from \"echarts\";\n  import selectServer from \"@/components/\bselectServer\";\n  export default {\n    name: \"Worldmap\",\n    components: { selectServer },\n    data() {\n      return {\n        imgStr: \"\",\n        reqdata: {\n          selectId: \"\"\n        },\n        isDisable:false,\n        name: \"worldmap\",\n        serverlist: [],\n        serverId: \"\",\n        typeList: [],\n        type: \"\",\n        allpoints: [],\n        points: [],\n        pointsNum: 0,\n        loading: false,\n      };\n    },\n    computed: {\n      pointsList: function () {\n        let data = this.points;\n        for (let item of data) {\n          item.value[1] = 880 - item.value[1];\n        }\n        return data;\n      }\n    },\n    mounted() {\n      this.imgBase64();\n    },\n    methods: {\n      imgBase64() {\n        let a = Promise.resolve(base64());\n        a.then(res => {\n          this.imgStr = res;\n        }).then(() => {\n          this.inialLine();\n        });\n      },\n      // typelist\n      getType(data) {\n        this.typeList = data;\n      },\n      //  搜索\n      search:_debounce(function(id) {\n        this.serverId = id;\n        if (!this.serverId) {\n          this.$message.error(\"请选择服务器ID\");\n          return false;\n        }\n        this.type = \"\";\n         this.isDisable=true;\n        this.loading = true;\n        this.getpointData();\n      },500),\n      // 获取数据有121个请求\n      async getpointData(i) {\n        let mapRequest = [];\n        for (let i = 0; i < 121; i++) {\n          mapRequest.push(\n            this.$http.post(`${api.mapBolck}?server=${this.serverId}&block=${i}`)\n          );\n        }\n        let data = await Promise.all(mapRequest);\n        this.dealdata(data);\n      },\n\n      // 获取到数据后进行处理\n      dealdata(data) {\n        this.isDisable=false;\n        let mapPoints = [];\n        for (let item of data) {\n          if (!item.Data.block || item.Data.block == \"null\") continue;\n          item.Data.block = JSON.parse(item.Data.block);\n          for (let point of item.Data.block) {\n            let pointItem = {\n              name: point.RID,\n              cType: point.CType,\n              cName: this.getName(point.CType).CName,\n              level: point.Level,\n              value: [point.X, point.Y]\n            };\n            mapPoints.push(pointItem);\n          }\n        }\n        this.allpoints = JSON.parse(JSON.stringify(mapPoints));\n        this.renderMap(mapPoints);\n      },\n\n      typechange() {\n        let points = [];\n        if (!this.type) {\n          points = this.allpoints;\n        } else {\n          points = this.allpoints.filter(item => {\n            return this.type == item.cType;\n          });\n        }\n        this.renderMap(points);\n      },\n\n      renderMap(data) {\n        this.points = JSON.parse(JSON.stringify(data));\n        this.pointsNum = this.points.length;\n        this.inialLine();\n      },\n\n      // 获取该类型对应的名称\n      getName(type) {\n        let typeinfo = {};\n        for (let item of this.typeList) {\n          if (type == item.CType) {\n            typeinfo = item;\n            break;\n          }\n        }\n        return typeinfo;\n      },\n\n      // 生成echart实例\n      inialLine() {\n        var img = new Image(); //新建对象\n        var canvas = document.createElement(\"canvas\");\n        var ctx = canvas.getContext(\"2d\");\n        var myChart = echarts.init(document.querySelector(\".map .mapitem\"));\n\n        canvas.width = myChart.getWidth();\n        canvas.height = myChart.getHeight();\n\n        var fullImage = new Image();\n        img.onload = function () {\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n          fullImage.src = canvas.toDataURL();\n          setTimeout(function () {\n            myChart.resize();\n          }, 100);\n        };\n        img.src = this.imgStr;\n        var geoMapName = \"geoMap\" + Math.round(Math.random() * 1e10);\n        var features = {\n          type: \"FeatureCollection\",\n          features: [\n            {\n              type: \"Feature\",\n              properties: {\n                name: geoMapName\n              },\n              geometry: {\n                type: \"MultiPolygon\",\n                coordinates: [[[[880, 880], [0, 880], [0, 0], [880, 0]]]]\n              }\n            }\n          ]\n        };\n        echarts.registerMap(geoMapName, features);\n        myChart.setOption({\n          tooltip: {\n            trigger: \"item\",\n            confine: true,\n            show: true,\n            formatter: function (params) {\n              let tip = `rid:${params.data.name}</br>X:${\n                params.value[0]\n                }</br>Y:${880 - params.value[1]}<br/>level:${\n                params.data.level\n                }<br>type:${params.data.cName}`;\n              return tip;\n            }\n          },\n          geo: {\n            map: geoMapName,\n            aspectScale: 1, // 宽高比\n            layoutCenter: [\"50%\", \"50%\"], // 位置\n            layoutSize: 880, // 大小\n            silent: true,\n            roam: true,\n            scaleLimit: {\n              min: 1\n            },\n            itemStyle: {\n              borderWidth: 0,\n              color: {\n                // type: \"pattern\",\n                image: fullImage, // 支持为 HTMLImageElement, HTMLCanvasElement，不支持路径字符串\n                repeat: \"no-repeat\" // 是否平铺, 可以是 'repeat-x', 'repeat-y', 'no-repeat'\n              }\n            }\n          },\n          series: [\n            {\n              type: \"scatter\",\n              coordinateSystem: \"geo\",\n              symbol: \"rect\",\n              itemStyle: {\n                normal: {\n                  opacity: 0.4,\n                  color: \"#fff\"\n                }\n              },\n              symbolSize: 10,\n              data: this.pointsList,\n              large: true\n            }\n          ]\n        });\n        this.loading = false;\n      }\n    }\n  };\n</script>\n<style lang=\"less\" scoped>\n  .map_content {\n    text-align: center;\n\n    .map {\n      .c-type-form {\n        width: 880px;\n        margin: 20px auto 0;\n        font-size: 12px;\n      }\n\n      .mapitem {\n        width: 880px;\n        height: 880px;\n        margin: 0px auto;\n        border: 1px solid #dadada;\n        text-align: left;\n      }\n    }\n  }\n</style>\n<style lang=\"less\">\n  .map_content {\n    .map {\n      .c-type-form {\n        .el-form-item {\n          margin-bottom: 5px;\n        }\n\n        .el-input__inner {\n          height: 34px;\n        }\n\n        .el-form-item__label {\n          font-size: 12px;\n        }\n      }\n    }\n  }\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/worldmap/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"common_content map_content\"},[_c('select-server',{attrs:{\"reqdata\":_vm.reqdata,\"name\":_vm.name,\"disabled\":_vm.isDisable},on:{\"getserver\":_vm.search,\"typeList\":_vm.getType}}),_vm._v(\" \"),_c('div',{staticClass:\"map\",attrs:{\"id\":\"map\"}},[_c('el-form',{staticClass:\"c-type-form\",attrs:{\"label-width\":\"100px\",\"inline\":true,\"label-position\":\"right\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"Type\",\"min-width\":\"120\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"Type\"},on:{\"change\":_vm.typechange},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},_vm._l((_vm.typeList),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.CName,\"value\":item.CType}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12,\"xs\":24}},[_c('el-form-item',{attrs:{\"label\":\"Num\",\"min-width\":\"120\"}},[_c('span',[_vm._v(_vm._s(_vm.pointsNum))])])],1)],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mapitem\",attrs:{\"id\":\"mapitem\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-423b8887\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/worldmap/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-423b8887\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-423b8887\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-423b8887\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-423b8887\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/worldmap/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}