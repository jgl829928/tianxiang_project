webpackJsonp([14],{"0Ha3":function(e,t,i){"use strict";t.a=function(e){var t=JSON.parse(n()(e));t.ActiveList.forEach(function(e,i){if(e.Comment=t.Comment,e.GroupID=t.GroupID,e.ServerIDList=t.ServerIDList?t.ServerIDList.join(","):"",e.index=i+1,e.ActionParams){var a=!0,r=!1,n=void 0;try{for(var l,c=s()(e.ActionParams);!(a=(l=c.next()).done);a=!0){var v=l.value;e["ACTION_"+v.Key]=v.Value}}catch(e){r=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw n}}}if(e.ClientParams){var _=!0,o=!1,u=void 0;try{for(var p,d=s()(e.ClientParams);!(_=(p=d.next()).done);_=!0){var y=p.value;e["CLIENT_"+y.Key]=y.Value}}catch(e){o=!0,u=e}finally{try{!_&&d.return&&d.return()}finally{if(o)throw u}}}delete e.ActionParams,delete e.ClientParams});var i=["ActivityType","ReferenceType","TimeArg1","TimeArg2","Ahead","Delay","Comment","GroupID","ServerIDList","index","ACTION_task_rewardgroup","ACTION_task_taskgroup","ACTION_task_sendmail","ACTION_task_mailtile","ACTION_rank_listId","ACTION_rank_questype","ACTION_rank_listname","ACTION_rank_mailtitle","ACTION_rank_typeparam","ACTION_shop_shopid","ACTION_collect_rewardgroup","ACTION_","ACTION_point_itemtype","ACTION_point_rewardgroup","ACTION_tasklimit_type","ACTION_tasklimit_param1","ACTION_tasklimit_range1","ACTION_tasklimit_endvalue","ACTION_tasklimit_recordtype","CLIENT_INT_ACTIVITIES_TYPE","CLIENT_STR_TITLE","CLIENT_STR_CONTENT_TITLE","CLIENT_STR_CONTENT_TEXT","CLIENT_STR_ADD_BANNER","CLIENT_STR_PIC_PATH","CLIENT_INT_ACTIVITIES_TYPE_CATEGORY","CLIENT_STR_RULE","CLIENT_INT_IS_ACHIEVE_SHOW","CLIENT_INT_SORTINDEX"];Object(l.l)(i,i,t.ActiveList,"活动配置excel")};var a=i("BO1k"),s=i.n(a),r=i("mvHQ"),n=i.n(r),l=i("TIfe")},"6sT4":function(e,t){},Vm8d:function(e,t){},qp82:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("BO1k"),s=i.n(a),r=i("mvHQ"),n=i.n(r),l=i("Xxa5"),c=i.n(l),v=i("exGp"),_=i.n(v),o=i("VsUZ"),u=i("TIfe"),p=i("0Ha3"),d={name:"activityEdit",data:function(){return{activeNames:"",activityInfo:{},activitySelect:{},checkAll:!1,isIndeterminate:!0,setResults:{},dialogVisible:!1}},mounted:function(){this.getParams(),this.getData()},methods:{getData:function(){var e=this;return _()(c.a.mark(function t(){var i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(o.b.activeEdit);case 2:(i=t.sent)&&1===i.Code&&(e.activitySelect=i.Data);case 4:case"end":return t.stop()}},t,e)}))()},getParams:function(){var e=this.$route.query;e.ServerIDList="null"==e.ServerIDList?[]:JSON.parse(e.ServerIDList),e.ActiveList=JSON.parse(e.activities),this.activityInfo=e},reverseType:function(e,t){var i=[];this.activitySelect[e]&&(i=JSON.parse(n()(this.activitySelect[e])));var a=!0,r=!1,l=void 0;try{for(var c,v=s()(i);!(a=(c=v.next()).done);a=!0){var _=c.value;if(_.Type==t)return _.Des}}catch(e){r=!0,l=e}finally{try{!a&&v.return&&v.return()}finally{if(r)throw l}}return t},handleCheckAllChange:function(e){this.activityInfo.ServerIDList=e?this.activitySelect.serverList:[],this.isIndeterminate=!1},handleEdit:function(){var e=this;this.$confirm("请确认是否修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.editSubmit()})},editSubmit:Object(u.a)(function(){var e=this,t={GroupID:Number(this.activityInfo.GroupID),ServerIDList:this.activityInfo.ServerIDList};this.$http.post(o.b.actEditSubmit,t).then(function(t){t&&1===t.Code&&(e.$message({message:"编辑成功",type:"success"}),e.setResults=t.Data,e.dialogVisible=!0)})},500),outExcel:Object(u.a)(function(){Object(p.a)(this.activityInfo)},500),handleClose:function(){this.$router.push({name:"activity",params:{timeType:this.activityInfo.timeType}})},formatUtc:function(e){return Object(u.j)(e)}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"common_page activity_edit"},[i("div",{staticClass:"title addHeader"},[e._v("Edit A Profile")]),e._v(" "),i("hr"),e._v(" "),i("div",{staticClass:"common_args"},[i("el-row",[i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("groupid")]),e._v(" "),i("span",[e._v(e._s(e.activityInfo.GroupID))])])]),e._v(" "),i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("comment")]),e._v(" "),i("span",{staticClass:"commentInput"},[i("el-input",{attrs:{type:"textarea",clearable:"",placeholder:"Comment"},model:{value:e.activityInfo.Comment,callback:function(t){e.$set(e.activityInfo,"Comment",t)},expression:"activityInfo.Comment"}})],1)])])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24,xs:24}},[i("label",[e._v("serverList")]),e._v(" "),i("span",{staticClass:"serverCheck"},[i("el-scrollbar",{staticStyle:{height:"100%"}},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),i("el-checkbox-group",{model:{value:e.activityInfo.ServerIDList,callback:function(t){e.$set(e.activityInfo,"ServerIDList",t)},expression:"activityInfo.ServerIDList"}},e._l(e.activitySelect.serverList,function(t,a){return i("el-checkbox",{key:a,attrs:{label:t}},[e._v(e._s(t))])}),1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"operate_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("提交")]),e._v(" "),i("el-button",{attrs:{type:"plain"},on:{click:e.outExcel}},[e._v("导出")])],1)],1),e._v(" "),i("el-card",{staticClass:"box-card"},[i("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.activityInfo.ActiveList,function(t,a){return i("el-collapse-item",{key:a,attrs:{name:a}},[i("template",{slot:"title"},[e._v("Activity "+e._s(a+1))]),e._v(" "),i("div",{staticClass:"activity_item"},[i("div",{staticClass:"info_title"},[e._v("BASE PARAMS")]),e._v(" "),i("div",{staticClass:"info_content"},[i("el-row",[i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("Activity Type")]),e._v(" "),i("span",[e._v(e._s(e.reverseType("activityTypeSelect",t.ActivityType)))])])]),e._v(" "),i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("Reference Type")]),e._v(" "),i("span",[e._v(e._s(e.reverseType("referenceTypeSelect",t.ReferenceType)))])])]),e._v(" "),i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("Time")]),e._v(" "),1==t.ReferenceType?i("span",[e._v("\n                    "+e._s(e.formatUtc(1e3*t.TimeArg1))+" -\n                    "+e._s(e.formatUtc(1e3*t.TimeArg2))+"\n                  ")]):i("span",[e._v(e._s(t.TimeArg1)+"—"+e._s(t.TimeArg2))])])]),e._v(" "),i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("Ahead")]),e._v(" "),i("span",[e._v(e._s(t.Ahead))])])]),e._v(" "),i("el-col",{attrs:{span:8,xs:24}},[i("div",[i("label",[e._v("Delay")]),e._v(" "),i("span",[e._v(e._s(t.Delay))])])])],1)],1),e._v(" "),i("div",{staticClass:"info_title"},[e._v("CLIENT PARAMS")]),e._v(" "),i("div",{staticClass:"info_content"},[i("el-row",e._l(t.ClientParams,function(t,a){return i("el-col",{key:a,attrs:{span:12,xs:24}},[i("div",{staticClass:"clientItem"},[i("label",[e._v(e._s(t.Key))]),e._v(" "),"INT_ACTIVITIES_TYPE"==t.Key?i("span",[e._v(e._s(e.reverseType("INT_ACTIVITIES_TYPESelect",t.Value)))]):i("span",[e._v(e._s(t.Value))])])])}),1)],1),e._v(" "),i("div",{staticClass:"info_title"},[e._v("ACTION PARAMS")]),e._v(" "),i("div",{staticClass:"info_content"},[i("el-row",e._l(t.ActionParams,function(t,a){return i("el-col",{key:a,attrs:{span:8,xs:24}},[i("div",[i("label",[e._v(e._s(t.Key))]),e._v(" "),"shopId"==t.Key?i("span",[e._v(e._s(e.reverseType("activityShopSelect",t.Value)))]):"rankListId"==t.Key?i("span",[e._v(e._s(e.reverseType("activityRankTypeSelect",t.Value)))]):"rewardgroup"==t.Key?i("span",[e._v(e._s(e.reverseType("activityRankRewardSelect",t.Value)))]):"rankName"==t.Key?i("span",[e._v(e._s(e.reverseType("activityRankNameSelect",t.Value)))]):"taskmailTitle"==t.Key?i("span",[e._v(e._s(e.reverseType("activityMailTitleSelect",t.Value)))]):"tasklimit_type"==t.Key?i("span",[e._v(e._s(e.reverseType("activityTaskLimiteSelect",t.Value)))]):"tasklimit_range1"==t.Key?i("span",[e._v(e._s(e.reverseType("activityRangeTypeSelect",t.Value)))]):"tasklimit_recordtype"==t.Key?i("span",[e._v(e._s(e.reverseType("activityRecordTypeSelect",t.Value)))]):i("span",[e._v(e._s(t.Value))])])])}),1)],1)])],2)}),1)],1),e._v(" "),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClose}},[e.setResults.addSuccessServerIDList?i("div",[e._v("添加成功的服务器："+e._s(e.setResults.addSuccessServerIDList.join(",")))]):e._e(),e._v(" "),e.setResults.addFailedServerIDList?i("div",[e._v("添加失败的服务器："+e._s(e.setResults.addFailedServerIDList.join(",")))]):e._e(),e._v(" "),e.setResults.delSuccessServerIDList?i("div",[e._v("删除成功的服务器："+e._s(e.setResults.delSuccessServerIDList.join(",")))]):e._e(),e._v(" "),e.setResults.delFailedServerIDList?i("div",[e._v("删除失败的服务器："+e._s(e.setResults.delFailedServerIDList.join(",")))]):e._e(),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var T=i("VU/8")(d,y,!1,function(e){i("6sT4"),i("Vm8d")},"data-v-22bdd2dc",null);t.default=T.exports}});
//# sourceMappingURL=14.5fd4d907315e2ea42346.js.map