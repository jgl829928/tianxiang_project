{"version":3,"sources":["webpack:///src/views/server/index.vue","webpack:///./src/views/server/index.vue?2855","webpack:///./src/views/server/index.vue"],"names":["server","name","data","tableData","listID","timeInterval","reuqestList","resList","stateData","updateTime","isOpen","created","this","getData","beforeRouteLeave","to","from","next","clearInterval","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","$http","get","api","sent","Code","Data","status","map","item","time","getStateData","setInterval","stop","_this2","_callee2","i","_context2","length","push","serverStatus","ID","promise_default","all","dealData","forEach","Running","Object","auth","Status","handleEdit","index","row","$router","path","query","id","changestatus","_this3","$confirm","Name","confirmButtonText","cancelButtonText","then","startServer","closeServer","_this4","start","$message","error","setTimeout","message","type","_this5","close","myInterval","$set","views_server","render","_vm","_h","$createElement","_c","_self","staticClass","_v","model","value","callback","$$v","expression","attrs","label","class","icon","circle","on","click","$event","staticStyle","width","border","stripe","show-overflow-tooltip","align","prop","min-width","scopedSlots","_u","key","fn","scope","$index","_s","Ping","_e","CPUProfile","RAMProfile","DISKProfile","OnlineInfo","undefined","_l","Type","Connected","fixed","size","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.82675e8cd5faf55f5bb7.js","sourcesContent":["<template>\n  <div class=\"common_content\">\n\n    <!-- 单选框 -->\n    <div class=\"common_radio\">\n      <span>Refresh Interval</span>\n      <el-radio-group v-model=\"updateTime\">\n        <el-radio :label=5>5s</el-radio>\n        <el-radio :label=10>10s</el-radio>\n        <el-radio :label=15>15s</el-radio>\n      </el-radio-group>\n    </div>\n    <!-- 是否显示操作框 -->\n    <div :class=\"isOpen?'open':'close'\">\n      <el-button :icon=\"isOpen?'el-icon-arrow-right':'el-icon-arrow-left'\" circle type=\"info\" @click=\"isOpen=!isOpen\"></el-button>\n    </div>\n    <!-- server表格 -->\n    <el-table :data=\"tableData\" style=\"width: 100%\" border stripe :show-overflow-tooltip=\"true\" class=\"content_table\">\n      <el-table-column align=\"center\" prop=\"ID\" label=\"ID\" width=\"150\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Type\" label=\"Type\" min-width=\"100\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Name\" label=\"Name\" min-width=\"100\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Ping\" label=\"Ping\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].Ping}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Running\" label=\"Running\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].Running}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"CPU\" label=\"CPU\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].CPUProfile}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"RAM\" label=\"RAM\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].RAMProfile}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"DISK\" label=\"DISK\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].DISKProfile}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"ClientOnline\" label=\"ClientOnline\" min-width=\"120\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"stateData[scope.$index]\">\n            {{stateData[scope.$index].OnlineInfo}}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Status\" label=\"Status\" min-width=\"120\">\n        <template slot-scope=\"scope\" v-if=\"stateData[scope.$index]\">\n          <span v-if=\"stateData[scope.$index].Status==0\">\n            close\n          </span>\n          <span v-else-if=\"stateData[scope.$index].Status==1\">\n            open\n          </span>\n          <span v-else-if=\"stateData[scope.$index].Status==2\">\n            closing\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"Area\" label=\"Area\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"ConnectServers\" label=\"ConnectServers\" min-width=\"210\">\n        <template slot-scope=\"scope\">\n          <div v-if=\"stateData[scope.$index]\">\n            <p v-for=\"(item,index) in stateData[scope.$index].ConnectServers\" :key=\"index\">{{item.Type}} :\n              {{item.Connected}}</p>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"ExterIP\" label=\"ExterIP\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"InnerIP\" label=\"InnerIP\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"ClientPort\" label=\"ClientPort\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"CommandPort\" label=\"CommandPort\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"WatchPort\" label=\"WatchPort\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"WatchURL\" label=\"WatchURL\" min-width=\"120\">\n      </el-table-column>\n      <el-table-column align=\"center\" fixed=\"right\" label=\"options\" min-width=\"250\" v-if=\"isOpen\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"handleEdit(scope.$index,scope.row)\" icon=\"el-icon-edit\" type=\"primary\" size=\"small\">edit</el-button>\n          <el-button @click=\"changestatus(scope.$index,scope.row)\" size=\"small\" v-if=\"scope.row.Type=='gameserver'\"\n            :disabled=\"(scope.row.time<60&&scope.row.time>0)||scope.row.status=='closing'\">\n            <span v-if=\"scope.row.time<60&&scope.row.time>0\">{{scope.row.time}}</span>\n            <span v-else>{{scope.row.status}}</span>\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport api from \"@/utils/api\";\nimport { formatSeconds } from \"@/utils/auth\";\nexport default {\n  name:\"Server\",\n  data() {\n    return {\n      tableData: [],\n      listID: [],\n      timeInterval: \"\",\n      reuqestList: [],\n      resList: [],\n      stateData: [],\n      updateTime: 5,\n      isOpen: false\n    };\n  },\n  created() {\n    this.getData();\n  },\n  beforeRouteLeave(to, from, next) {\n    clearInterval(this.timeInterval);\n    next();\n  },\n  methods: {\n    // 获取初始数据\n    async getData() {\n      let res = await this.$http.get(api.server);\n      if (res && res.Code === 1) {\n        this.tableData = res.Data.status || [];\n      }\n      this.tableData.map(item => {\n        item.status = \"\";\n        item.time = 60;\n      });\n\n      this.getStateData();\n      // 多个请求动态获取服务器状态\n      this.timeInterval = setInterval(\n        this.getStateData,\n        this.updateTime * 1000\n      );\n    },\n    //动态获取服务器状态\n    async getStateData() {\n      for (let i = 0; i < this.tableData.length; i++) {\n        this.reuqestList.push(\n          this.$http.get(`${api.serverStatus}?serverid=${this.tableData[i].ID}`)\n        );\n      }\n      this.resList = await Promise.all(this.reuqestList);\n      this.stateData = [];\n\n      this.resList.map(item => {\n        if (item.Data && item.Data.status) {\n          this.stateData.push(item.Data.status[0]);\n        } else {\n          this.stateData.push({});\n        }\n      });\n      this.dealData(this.stateData);\n      this.reuqestList = [];\n    },\n    // 设置服务器状态按钮显示\n    dealData(data) {\n      let tableData = this.tableData;\n      data.forEach((item, i) => {\n        item.Running = formatSeconds(item.Running);\n        if (item.Status === 0) {\n          tableData[i].status = \"start\";\n        }\n        if (item.Status === 1) {\n          tableData[i].status = \"close\";\n        }\n        if (item.Status === 2) {\n          tableData[i].status = \"closing\";\n        }\n      });\n    },\n    // 编辑\n    handleEdit(index, row) {\n      this.$router.push({\n        path: \"server/edit\",\n        query: {\n          id: row.ID\n        }\n      });\n    },\n    // 改变状态\n    changestatus(index, row) {\n      if (row.status == \"start\") {\n        // 停止状态开启服务\n        this.$confirm(\n          `您确定要开启服务器 ID=${row.ID} 服务器名=${row.Name}?`,\n          \"提示\",\n          {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\"\n          }\n        ).then(() => {\n          this.startServer(index, row);\n        });\n      }\n      if (row.status == \"close\") {\n        // 运行状态关闭服务\n        this.$confirm(\n          `您确定要关闭服务器 ID=${row.ID} 服务器名=${row.Name}?`,\n          \"提示\",\n          {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\"\n          }\n        ).then(() => {\n          this.closeServer(index, row);\n        });\n      }\n    },\n    // 开启服务\n    startServer(index, row) {\n      this.$http.get(`${api.start}?serverid=${row.ID}`).then(res => {\n        if (!res||res.Code !== 1) {\n          this.$message.error(\"服务器打开失败，请重试\");\n          return false;\n        }\n        this.getStateData();\n        setTimeout(() => {\n          this.$message({\n            message: \"服务器正在打开,请稍等...\",\n            type: \"success\"\n          });\n        }, 3000);\n      });\n    },\n    // 暂停服务\n    closeServer(index, row) {\n      this.$http.get(`${api.close}?serverid=${row.ID}`).then(res => {\n        if (!res||res.Code !== 1) {\n          this.$message.error(\"服务器关闭失败，请重试\");\n          return false;\n        }\n        this.$message({\n          message: \"服务器正在关闭\",\n          type: \"success\"\n        });\n        // 设置定时器\n        row.time = 60;\n        let myInterval = setInterval(() => {\n          if (row.time <= 0) {\n            clearInterval(myInterval);\n            this.getStateData();\n          } else {\n            row.time--;\n            this.$set(row, \"time\", row.time);\n            this.$set(this.tableData, index, row);\n          }\n        }, 1000);\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang='less'>\ntable {\n  .el-button {\n    padding: 6px 20px;\n  }\n}\n.open {\n  position: fixed;\n  top: 40%;\n  right: 260px;\n  z-index: 999;\n}\n.close {\n  position: fixed;\n  top: 40%;\n  right: 10px;\n  z-index: 999;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/server/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"common_content\"},[_c('div',{staticClass:\"common_radio\"},[_c('span',[_vm._v(\"Refresh Interval\")]),_vm._v(\" \"),_c('el-radio-group',{model:{value:(_vm.updateTime),callback:function ($$v) {_vm.updateTime=$$v},expression:\"updateTime\"}},[_c('el-radio',{attrs:{\"label\":5}},[_vm._v(\"5s\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":10}},[_vm._v(\"10s\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":15}},[_vm._v(\"15s\")])],1)],1),_vm._v(\" \"),_c('div',{class:_vm.isOpen?'open':'close'},[_c('el-button',{attrs:{\"icon\":_vm.isOpen?'el-icon-arrow-right':'el-icon-arrow-left',\"circle\":\"\",\"type\":\"info\"},on:{\"click\":function($event){_vm.isOpen=!_vm.isOpen}}})],1),_vm._v(\" \"),_c('el-table',{staticClass:\"content_table\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\",\"show-overflow-tooltip\":true}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ID\",\"label\":\"ID\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Type\",\"label\":\"Type\",\"min-width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Name\",\"label\":\"Name\",\"min-width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Ping\",\"label\":\"Ping\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].Ping)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Running\",\"label\":\"Running\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].Running)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"CPU\",\"label\":\"CPU\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].CPUProfile)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"RAM\",\"label\":\"RAM\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].RAMProfile)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"DISK\",\"label\":\"DISK\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].DISKProfile)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ClientOnline\",\"label\":\"ClientOnline\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('span',[_vm._v(\"\\n          \"+_vm._s(_vm.stateData[scope.$index].OnlineInfo)+\"\\n        \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Status\",\"label\":\"Status\",\"min-width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm.stateData[scope.$index]?[(_vm.stateData[scope.$index].Status==0)?_c('span',[_vm._v(\"\\n          close\\n        \")]):(_vm.stateData[scope.$index].Status==1)?_c('span',[_vm._v(\"\\n          open\\n        \")]):(_vm.stateData[scope.$index].Status==2)?_c('span',[_vm._v(\"\\n          closing\\n        \")]):_vm._e()]:undefined}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"Area\",\"label\":\"Area\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ConnectServers\",\"label\":\"ConnectServers\",\"min-width\":\"210\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.stateData[scope.$index])?_c('div',_vm._l((_vm.stateData[scope.$index].ConnectServers),function(item,index){return _c('p',{key:index},[_vm._v(_vm._s(item.Type)+\" :\\n            \"+_vm._s(item.Connected))])})):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ExterIP\",\"label\":\"ExterIP\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"InnerIP\",\"label\":\"InnerIP\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ClientPort\",\"label\":\"ClientPort\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"CommandPort\",\"label\":\"CommandPort\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"WatchPort\",\"label\":\"WatchPort\",\"min-width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"WatchURL\",\"label\":\"WatchURL\",\"min-width\":\"120\"}}),_vm._v(\" \"),(_vm.isOpen)?_c('el-table-column',{attrs:{\"align\":\"center\",\"fixed\":\"right\",\"label\":\"options\",\"min-width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit(scope.$index,scope.row)}}},[_vm._v(\"edit\")]),_vm._v(\" \"),(scope.row.Type=='gameserver')?_c('el-button',{attrs:{\"size\":\"small\",\"disabled\":(scope.row.time<60&&scope.row.time>0)||scope.row.status=='closing'},on:{\"click\":function($event){_vm.changestatus(scope.$index,scope.row)}}},[(scope.row.time<60&&scope.row.time>0)?_c('span',[_vm._v(_vm._s(scope.row.time))]):_c('span',[_vm._v(_vm._s(scope.row.status))])]):_vm._e()]}}])}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33205b37\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/server/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33205b37\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33205b37\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33205b37\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/server/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}