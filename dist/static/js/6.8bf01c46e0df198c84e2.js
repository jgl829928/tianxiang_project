webpackJsonp([6],{"2xR1":function(t,e){},VyyN:function(t,e){},yW15:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),r=a("mvHQ"),i=a.n(r),l=a("Xxa5"),o=a.n(l),c=a("exGp"),v=a.n(c),_=a("VsUZ"),u={name:"UserDetail",data:function(){return{id:"",muteTime:"",leagueData:[],baseInfo:{},reqData:{mailList:[{class:"",type:"",count:"",typeList:[]}]},allData:{},classList:[],send_dialog:!1,isRepeat:!1,error_msg:"",sendData:[],multipleSelection:[]}},created:function(){this.getData()},methods:{getData:function(){var t=this;return v()(o.a.mark(function e(){var a,s,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=t.$route.query.id,e.next=3,t.$http.get(_.b.userInfo+"?rid="+t.id);case 3:if((a=e.sent)&&1===a.Code)for(n in(s=a.Data).role&&(t.baseInfo=JSON.parse(s.role)),s.usr&&(t.baseInfo.Ban=JSON.parse(s.usr).Ban,t.baseInfo.Mute=new Date(JSON.parse(s.usr).Mute).getTime()),t.muteTime=new Date(t.baseInfo.Mute).getTime(),t.allData=s.item,t.allData)t.classList.push(n);case 5:case"end":return e.stop()}},e,t)}))()},add:function(t){this.reqData.mailList.splice(t+1,0,{class:"",type:"",count:"",typeList:[]})},remove:function(t){0!==t&&this.reqData.mailList.splice(t,1)},classChange:function(t,e){for(var a in this.reqData.mailList[e].type="",this.allData)a==t&&(this.reqData.mailList[e].typeList=this.allData[a])},send:function(t){var e=this;return v()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$refs[t].validate(function(){var t=v()(o.a.mark(function t(a){var s,r,l,c,v,_,u,m,d,p,f,b,h;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:e.sendData=JSON.parse(i()(e.reqData.mailList)),s=[],e.isRepeat=!1,r=!0,l=!1,c=void 0,t.prev=8,v=n()(e.sendData);case 10:if(r=(_=v.next()).done){t.next=43;break}if(u=_.value,s.includes(u.type)){t.next=16;break}s.push(u.type),t.next=19;break;case 16:return e.isRepeat=!0,e.error_msg="道具重复！！！ 请检查后重新发送",t.abrupt("return");case 19:for(m=!0,d=!1,p=void 0,t.prev=22,f=n()(u.typeList);!(m=(b=f.next()).done);m=!0)h=b.value,u.type===h.Type&&(u.name=h.Name);t.next=30;break;case 26:t.prev=26,t.t0=t.catch(22),d=!0,p=t.t0;case 30:t.prev=30,t.prev=31,!m&&f.return&&f.return();case 33:if(t.prev=33,!d){t.next=36;break}throw p;case 36:return t.finish(33);case 37:return t.finish(30);case 38:delete u.typeList,delete u.class;case 40:r=!0,t.next=10;break;case 43:t.next=49;break;case 45:t.prev=45,t.t1=t.catch(8),l=!0,c=t.t1;case 49:t.prev=49,t.prev=50,!r&&v.return&&v.return();case 52:if(t.prev=52,!l){t.next=55;break}throw c;case 55:return t.finish(52);case 56:return t.finish(49);case 57:e.isRepeat||(e.send_dialog=!0,e.error_msg="");case 58:case"end":return t.stop()}},t,e,[[8,45,49,57],[22,26,30,38],[31,,33,37],[50,,52,56]])}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return a.stop()}},a,e)}))()},ban:function(){var t=this;return v()(o.a.mark(function e(){var a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!t.baseInfo.Ban,e.next=3,t.$http.get(_.b.userBan+"?rid="+t.id+"&ban="+a);case 3:(s=e.sent)&&1===s.Code&&t.getData();case 5:case"end":return e.stop()}},e,t)}))()},mute:function(){var t=this;return v()(o.a.mark(function e(){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get(_.b.userMute+"?rid="+t.id+"&mute="+t.muteTime/1e3);case 2:(a=e.sent)&&1===a.Code&&t.getData();case 4:case"end":return e.stop()}},e,t)}))()},handleSelectionChange:function(t){this.multipleSelection=t},confirm_send:function(){var t=this;return v()(o.a.mark(function e(){var a,s,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.multipleSelection).length==t.sendData.length){e.next=4;break}return t.$message.error("有未选择的道具,请检查后重新发送"),e.abrupt("return",!1);case 4:return a.map(function(t){delete t.name}),s={rid:parseInt(t.id),items:a},e.next=8,t.$http.post(_.b.userSend,s);case 8:(n=e.sent)&&1===n.Code&&(t.$message({message:"发送成功",type:"success",duration:1e3}),t.send_dialog=!1);case 10:case"end":return e.stop()}},e,t)}))()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common_content"},[a("div",{staticClass:"frame"},[t._m(0),t._v(" "),a("div",{staticClass:"frameDiv"},[a("table",{staticClass:"tables first_table"},[a("tr",[a("td",[t._v("Name")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Name))])]),t._v(" "),a("tr",[a("td",[t._v("RID")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.RID))])]),t._v(" "),a("tr",[a("td",[t._v("Admin OP")]),t._v(" "),a("td",[a("el-button",{staticClass:"common_btn",attrs:{type:"success",plain:""},on:{click:t.getData}},[t._v("Refresh")])],1)]),t._v(" "),a("tr",[a("td",[t._v("Ban")]),t._v(" "),a("td",[a("el-button",{staticClass:"common_btn",attrs:{type:"danger"},on:{click:t.ban}},[t._v("Ban")])],1)]),t._v(" "),a("tr",[a("td",[t._v("Mute")]),t._v(" "),a("td",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"timestamp"},model:{value:t.muteTime,callback:function(e){t.muteTime=e},expression:"muteTime"}}),t._v(" "),a("el-button",{staticClass:"mute_btn",attrs:{type:"primary"},on:{click:t.mute}},[t._v("Mute")])],1)])]),t._v(" "),a("table",{staticClass:"tables"},[a("tr",[a("td",[t._v("AppName")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.AppName))])]),t._v(" "),a("tr",[a("td",[t._v("LoginIP")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LoginIP))])]),t._v(" "),a("tr",[a("td",[t._v("OSVersion")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.OSVersion))])]),t._v(" "),a("tr",[a("td",[t._v("Ban")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Ban))])]),t._v(" "),a("tr",[a("td",[t._v("Mute")]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(t.baseInfo.Mute,"YYYY-MM-DD HH:mm:ss")))])])]),t._v(" "),a("table",{staticClass:"tables"},[a("tr",[a("td",[t._v("UID")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.UID))])]),t._v(" "),a("tr",[a("td",[t._v("AppVersion")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.AppVersion))])]),t._v(" "),a("tr",[a("td",[t._v("LoginCount")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LoginCount))])]),t._v(" "),a("tr",[a("td",[t._v("LastLogin")]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(t.baseInfo.LastLogin,"YYYY-MM-DD HH:mm:ss"))+"\n                    ")])]),t._v(" "),a("tr",[a("td",[t._v("Country")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Country)+"\n                    ")])])]),t._v(" "),a("table",{staticClass:"tables"},[a("tr",[a("td",[t._v("Channel")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LoginIP))])]),t._v(" "),a("tr",[a("td",[t._v("Campaign")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LoginIP))])]),t._v(" "),a("tr",[a("td",[t._v("X")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.X))])]),t._v(" "),a("tr",[a("td",[t._v("Y")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Y))])]),t._v(" "),a("tr",[a("td",[t._v("CityLevel")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.CityLevel))])])])])]),t._v(" "),a("div",{staticClass:"frame"},[t._m(1),t._v(" "),a("div",{staticClass:"frameDiv"},[a("table",{staticClass:"tables special_tab"},[a("tr",[a("td",[t._v("LID")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LID))]),t._v(" "),a("td",[t._v("LName")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.LName))]),t._v(" "),a("td",[t._v("Position")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Position))])])])])]),t._v(" "),a("div",{staticClass:"frame"},[t._m(2),t._v(" "),a("div",{staticClass:"frameDiv"},[a("table",{staticClass:"tables layout_tab"},[a("tr",[a("td",[t._v("Gold")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.Gold))])]),t._v(" "),a("tr",[a("td",[t._v("NSteel")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.NSteel))])]),t._v(" "),a("tr",[a("td",[t._v("NOil")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.NOil))])]),t._v(" "),a("tr",[a("td",[t._v("NRubber")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.NRubber))])]),t._v(" "),a("tr",[a("td",[t._v("NAmmo")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.NAmmo))])])]),t._v(" "),a("table",{staticClass:"tables layout_tab"},[t._m(3),t._v(" "),a("tr",[a("td",[t._v("PSteel")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.PSteel))])]),t._v(" "),a("tr",[a("td",[t._v("POil")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.POil))])]),t._v(" "),a("tr",[a("td",[t._v("PRubber")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.PRubber))])]),t._v(" "),a("tr",[a("td",[t._v("PAmmo")]),t._v(" "),a("td",[t._v(t._s(t.baseInfo.PAmmo))])])])])]),t._v(" "),a("div",{staticClass:"frame"},[t._m(4),t._v(" "),a("div",{staticClass:"frameDiv"},[a("el-table",{staticClass:"level_tab",staticStyle:{width:"100%"},attrs:{data:t.baseInfo.ArmyList,border:"","max-height":"200"}},[a("el-table-column",{attrs:{prop:"ArmyType",align:"center",label:"ArmyType"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",align:"center",label:"Name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HealCount",align:"center",label:"HealCount"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HurtCount",align:"center",label:"HurtCount"}})],1)],1)]),t._v(" "),a("div",{staticClass:"frame"},[t._m(5),t._v(" "),a("div",{staticClass:"frameDiv"},[a("el-table",{staticClass:"level_tab",staticStyle:{width:"100%"},attrs:{data:t.baseInfo.HeroList,border:"","max-height":"300"}},[a("el-table-column",{attrs:{prop:"HID",align:"center",label:"HID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"HType",align:"center",label:"Type"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Name",align:"center",label:"Name"}})],1)],1)]),t._v(" "),a("div",{staticClass:"frame mailFrame"},[t._m(6),t._v(" "),a("div",[a("el-form",{ref:"reqForm",staticClass:"add_form",attrs:{"label-width":"100px",inline:!0,"label-position":"right",model:t.reqData}},[t._l(t.reqData.mailList,function(e,s){return a("el-row",{key:s},[a("el-col",{attrs:{span:8,xs:24}},[a("el-form-item",{attrs:{label:"Item Class",prop:"mailList."+s+".class",rules:[{required:!0,message:"请输入道具种类",trigger:"change"}]}},[a("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},on:{change:function(a){t.classChange(e.class,s)}},model:{value:e.class,callback:function(a){t.$set(e,"class",a)},expression:"item.class"}},t._l(t.classList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"Item Type",prop:"mailList."+s+".type",rules:[{required:!0,message:"请输入道具具体类型",trigger:"change"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},t._l(e.typeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.Name,value:t.Type}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"Count",prop:"mailList."+s+".count",rules:[{required:!0,message:"请输入数量",trigger:"blur"},{pattern:/^(-)?[1-9][0-9]*$/,message:"发送道具数量不能为0",trigger:"blur"}]}},[a("el-input-number",{attrs:{"controls-position":"right",max:1e6,min:-1e6},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}})],1)],1),t._v(" "),a("el-col",{staticClass:"edit_options",attrs:{span:2}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:"",size:"mini"},on:{click:function(e){t.add(s)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:"",size:"mini"},on:{click:function(e){t.remove(s)}}})],1)],1)}),t._v(" "),a("div",{staticClass:"send_btn"},[a("p",{staticClass:"error_message"},[t._v(t._s(t.error_msg))]),t._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.send("reqForm")}}},[t._v("Send To Role")])],1)],2)],1)]),t._v(" "),a("div",{staticClass:"common_dialog"},[a("el-dialog",{attrs:{title:"Send To Role",visible:t.send_dialog},on:{"update:visible":function(e){t.send_dialog=e}}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.sendData,"select-on-indeterminate":!0,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"type","min-width":"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",align:"center",label:"count"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.send_dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm_send}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("BASE INFO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("LEAGUE INFO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("RES INFO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("--")]),this._v(" "),e("td",[this._v("--")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("TROOPS INFO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("HEROES INFO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"frameTop"},[e("span",{staticClass:"frameName"},[this._v("SystemMail")])])}]};var d=a("VU/8")(u,m,!1,function(t){a("VyyN"),a("2xR1")},"data-v-a8b08cf4",null);e.default=d.exports}});
//# sourceMappingURL=6.8bf01c46e0df198c84e2.js.map